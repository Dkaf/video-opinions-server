{"version":3,"sources":["webpack:///webpack/bootstrap f3130767f0bf4423b8f9","webpack:///./src/app.js","webpack:///external \"mongoose\"","webpack:///external \"express\"","webpack:///./src/models/review.js","webpack:///external \"jsonwebtoken\"","webpack:///external \"babel-polyfill\"","webpack:///./src/index.js","webpack:///external \"body-parser\"","webpack:///external \"cors\"","webpack:///external \"config\"","webpack:///external \"dotenv\"","webpack:///./src/routes.js","webpack:///./src/controllers/admin.js","webpack:///./src/models/user.js","webpack:///external \"bcrypt-nodejs\"","webpack:///./src/controllers/auth.js","webpack:///./src/controllers/review.js"],"names":["config","DBHost","get","connect","useMongoClient","then","console","log","db","connection","on","error","bind","app","use","json","set","process","env","SECRET_KEY","reviewSchema","title","String","thumbnail","reviewText","date","type","Review","model","port","PORT","listen","router","getReviews","post","logIn","verifyToken","addReview","delete","removeReview","changePassword","adminController","req","res","password","body","findOne","compareSync","user","payload","name","token","sign","expiresIn","status","success","message","catch","err","today","Date","newReview","toLocaleDateString","save","review","id","findOneAndRemove","data","hash","hashSync","findOneAndUpdate","userSchema","required","User","authController","next","query","headers","verify","decoded","reviewController","find","reviews"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f3130767f0bf4423b8f9","import express from 'express';\nimport bodyParser from 'body-parser';\nimport cors from 'cors';\nimport mongoose from 'mongoose';\nimport config from 'config';\nimport dotenv from 'dotenv';\ndotenv.config();\n\n\nimport router from './routes';\n\nlet DBHost = config.get('DBHost');\n\nmongoose.connect(DBHost, {\n\tuseMongoClient: true\n}).then(console.log(\"Connected to mongodb...\"));\nlet db = mongoose.connection;\ndb.on('error', console.error.bind('connection error'));\n\nconst app = express();\n\n//Middleware\napp.use(cors());\napp.use(bodyParser.json());\napp.set('secret', process.env.SECRET_KEY);\n\napp.use('/admin', router);\n\nexport default app;\n\n\n// WEBPACK FOOTER //\n// ./src/app.js","module.exports = require(\"mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose\"\n// module id = 1\n// module chunks = 0","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 2\n// module chunks = 0","import mongoose, { Schema } from 'mongoose';\n\nconst reviewSchema = new Schema({\n    title: String,\n    thumbnail: String,\n    reviewText: String,\n    date: String,\n    type: String\n});\n\nconst Review = mongoose.model('Review', reviewSchema);\n\nexport default Review;\n\n\n// WEBPACK FOOTER //\n// ./src/models/review.js","module.exports = require(\"jsonwebtoken\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jsonwebtoken\"\n// module id = 4\n// module chunks = 0","module.exports = require(\"babel-polyfill\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-polyfill\"\n// module id = 6\n// module chunks = 0","import app from './app';\n\nconst port = process.env.PORT || 3000\n\napp.listen(port, () => {\n\tconsole.log('server is running on port ' + port);\n});\n\nexport default app;\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = require(\"body-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"body-parser\"\n// module id = 8\n// module chunks = 0","module.exports = require(\"cors\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"cors\"\n// module id = 9\n// module chunks = 0","module.exports = require(\"config\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"config\"\n// module id = 10\n// module chunks = 0","module.exports = require(\"dotenv\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"dotenv\"\n// module id = 11\n// module chunks = 0","import express from 'express';\n\nimport adminController from './controllers/admin';\nimport authController from './controllers/auth';\nimport reviewController from './controllers/review';\n\nconst router = express();\n\nrouter.get('/review', reviewController.getReviews);\n\nrouter.post('/login', adminController.logIn);\n\nrouter.post('/review', authController.verifyToken, adminController.addReview);\n\nrouter.delete('/review', authController.verifyToken, adminController.removeReview);\n\nrouter.post('/settings', authController.verifyToken, adminController.changePassword);\n\nexport default router;\n\n\n// WEBPACK FOOTER //\n// ./src/routes.js","import app from './../app';\nimport Review from './../models/review';\nimport User from './../models/user';\nimport jwt from 'jsonwebtoken';\nimport bcrypt from 'bcrypt-nodejs';\n\nconst adminController = {};\n\n//POST Login\nadminController.logIn = (req, res) => {\n    const  { password } = req.body;\n    console.log(\"login attempt made\");\n    User.findOne({'name': 'admin'})\n    .then( user => {\n        if (bcrypt.compareSync(password, user.password)) {\n            console.log(\"passwords match\");\n            const payload = {\n                name: user.name\n            };\n            let token = jwt.sign(payload, app.get('secret'), {expiresIn: '2h'});\n            res.status(201).json({\n                success: true,\n                token: token\n            });\n        }\n        else {\n            console.log(\"passwords don't match\");\n            res.status(404).json({\n                success: false,\n                message: \"password does not match\"\n            });\n        }\n    })\n    .catch( err => {\n        res.status(500).json({\n            success: false,\n            err: err\n        })\n    })\n}\n\n//POST Add Review\nadminController.addReview = (req, res) => {\n    const { title, thumbnail, reviewText, type } = req.body;\n    let today = new Date();\n    let newReview = new Review({\n        title,\n        thumbnail,\n        reviewText,\n        date: today.toLocaleDateString(),\n        type\n    })\n\n    newReview.save()\n    .then( review => {\n        res.status(200).json({\n            success: true,\n            review\n        })\n    })\n    .catch( err => {\n        res.status(500).json({\n            success: false,\n            err\n        })\n    })\n\n}\n\n//DELETE Remove Review\nadminController.removeReview = (req, res) => {\n    const { id } = req.body;\n    Review.findOneAndRemove({'_id': id})\n    .then( data => {\n        res.status(200).json({\n            success: true,\n            message: 'review removed',\n            data: data\n        });\n    })\n    .catch( err => {\n        res.status(500).json({\n            success: false,\n            err: err\n        })\n    })\n}\n\nadminController.changePassword = (req, res) => {\n    const { password } = req.body;\n    const hash = bcrypt.hashSync(password)\n    User.findOneAndUpdate({'name': 'admin'}, {'password': hash})\n    .then( data => {\n        res.status(200).json({\n            success: true,\n            message: 'password changed'\n        })\n    })\n}\n\nexport default adminController;\n\n\n// WEBPACK FOOTER //\n// ./src/controllers/admin.js","import mongoose, { Schema } from 'mongoose';\r\n\r\nconst userSchema = new Schema({\r\n  name: {type: String, required: true},\r\n  password: {type: String, required: true}\r\n});\r\n\r\nconst User = mongoose.model('User', userSchema);\r\n\r\nexport default User;\n\n\n// WEBPACK FOOTER //\n// ./src/models/user.js","module.exports = require(\"bcrypt-nodejs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"bcrypt-nodejs\"\n// module id = 15\n// module chunks = 0","import app from './../app';\nimport jwt from 'jsonwebtoken';\n\nconst authController = {};\n\n\n\nauthController.verifyToken = (req, res, next) => {\n\tlet token = req.body.token || req.query.token || req.headers['x-access-token'];\n    \n\tif(token) {\n\t\tjwt.verify(token, app.get('secret'), (err, decoded) => {\n\t\t\tif(err) {\n\t\t\t\tres.json({success: false, message: 'Failed to verify token'});\n\t\t\t\tthrow err;\n\t\t\t}\n\t\t\telse {\n\t\t\t\treq.decoded = decoded;\n\t\t\t\tnext();\n\t\t\t}\n\t\t});\n\t} else {\n\t\tres.status(403).json({success: false, message: 'no token provided'});\n\t}\n};\n\nexport default authController;\n\n\n\n// WEBPACK FOOTER //\n// ./src/controllers/auth.js","import app from './../app';\r\nimport Review from './../models/review'\r\n\r\nconst reviewController = {};\r\n\r\nreviewController.getReviews = (req, res) => {\r\n  Review.find()\r\n  .then(reviews => {\r\n    res.status(200).json({\r\n      success: true,\r\n      reviews\r\n    })\r\n  .catch(err => {\r\n    res.status(500).json({\r\n      success: false,\r\n      err\r\n    })\r\n  })\r\n  })\r\n}\r\n\r\nexport default reviewController\n\n\n// WEBPACK FOOTER //\n// ./src/controllers/review.js"],"sourceRoot":""}